{
  "version": 3,
  "sources": ["dashboard.js"],
  "sourcesContent": ["/**\n * Beatify Dashboard - Spectator Display (Story 10.4)\n * Read-only observer that connects to WebSocket and displays game state\n */\n(function() {\n    'use strict';\n\n    // Alias BeatifyUtils for convenience\n    var utils = window.BeatifyUtils || {};\n\n    // View elements\n    var loadingView = document.getElementById('dashboard-loading');\n    var noGameView = document.getElementById('dashboard-no-game');\n    var lobbyView = document.getElementById('dashboard-lobby');\n    var playingView = document.getElementById('dashboard-playing');\n    var revealView = document.getElementById('dashboard-reveal');\n    var endView = document.getElementById('dashboard-end');\n    var pausedView = document.getElementById('dashboard-paused');\n\n    // All views array for showView helper\n    var allViews = [loadingView, noGameView, lobbyView, playingView, revealView, endView, pausedView];\n\n    // WebSocket connection\n    var ws = null;\n    var reconnectAttempts = 0;\n    var MAX_RECONNECT_ATTEMPTS = 20;\n    var MAX_RECONNECT_DELAY_MS = 30000;\n\n    // State tracking\n    var previousPlayers = [];\n    var countdownInterval = null;\n    var lastQRCodeUrl = null;\n\n    // Utility functions from BeatifyUtils\n    // waitForI18n, t, getLocalizedSongField, escapeHtml moved to BeatifyUtils\n\n    /**\n     * Show a specific view and hide all others\n     * @param {string} viewId - ID of view to show\n     */\n    function showView(viewId) {\n        utils.showView(allViews, viewId);\n    }\n\n    /**\n     * Get reconnection delay with exponential backoff\n     * @returns {number} Delay in milliseconds\n     */\n    function getReconnectDelay() {\n        return Math.min(1000 * Math.pow(2, reconnectAttempts), MAX_RECONNECT_DELAY_MS);\n    }\n\n    /**\n     * Connect to WebSocket as read-only observer (AC 10.4.1)\n     */\n    function connectWebSocket() {\n        var wsProtocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';\n        var wsUrl = wsProtocol + '//' + window.location.host + '/beatify/ws';\n\n        ws = new WebSocket(wsUrl);\n\n        ws.onopen = function() {\n            console.log('[Dashboard] WebSocket connected');\n            reconnectAttempts = 0;\n            // Request current state as read-only observer\n            ws.send(JSON.stringify({ type: 'get_state' }));\n        };\n\n        ws.onmessage = function(event) {\n            try {\n                var data = JSON.parse(event.data);\n                handleServerMessage(data);\n            } catch (e) {\n                console.error('[Dashboard] Failed to parse message:', e);\n            }\n        };\n\n        ws.onclose = function() {\n            console.log('[Dashboard] WebSocket closed');\n            if (reconnectAttempts < MAX_RECONNECT_ATTEMPTS) {\n                reconnectAttempts++;\n                var delay = getReconnectDelay();\n                console.log('[Dashboard] Reconnecting in ' + delay + 'ms (attempt ' + reconnectAttempts + ')');\n                setTimeout(connectWebSocket, delay);\n            } else {\n                showView('dashboard-no-game');\n            }\n        };\n\n        ws.onerror = function(err) {\n            console.error('[Dashboard] WebSocket error:', err);\n        };\n    }\n\n    /**\n     * Handle messages from server\n     * @param {Object} data - Parsed message data\n     */\n    function handleServerMessage(data) {\n        if (data.type === 'state') {\n            // Debug: Log game_performance data (Story 14.4)\n            if (data.game_performance) {\n                console.log('[Dashboard] game_performance:', data.game_performance);\n            }\n            handleStateUpdate(data);\n        } else if (data.type === 'error') {\n            console.log('[Dashboard] Server error:', data.message);\n            // Dashboard ignores most errors since it's read-only\n        } else if (data.type === 'player_reaction') {\n            // Live reactions from players (Story 18.9)\n            showFloatingReaction(data.player_name, data.emoji);\n        } else if (data.type === 'metadata_update') {\n            // Issue #42: Handle async metadata update for fast transitions\n            handleMetadataUpdate(data.song);\n        }\n        // Dashboard ignores submit_ack, song_stopped, volume_changed since it doesn't interact\n    }\n\n    /**\n     * Handle async metadata update for fast transitions (Issue #42)\n     * Updates album art with fade transition when metadata becomes available\n     * @param {Object} song - Song metadata with artist, title, album_art\n     */\n    function handleMetadataUpdate(song) {\n        if (!song) return;\n\n        var albumArt = document.getElementById('dashboard-album-art');\n        if (albumArt && song.album_art) {\n            var newSrc = song.album_art;\n\n            // Skip if already showing this image\n            if (albumArt.src === newSrc) return;\n\n            // Fade transition for smooth update\n            albumArt.style.transition = 'opacity 0.3s ease-in-out';\n            albumArt.style.opacity = '0.5';\n\n            // Preload and swap\n            var preloader = new Image();\n            preloader.onload = function() {\n                albumArt.src = newSrc;\n                albumArt.style.opacity = '1';\n            };\n            preloader.onerror = function() {\n                albumArt.src = '/beatify/static/img/no-artwork.svg';\n                albumArt.style.opacity = '1';\n            };\n            preloader.src = newSrc;\n        }\n\n        console.log('[Dashboard] Metadata updated:', song.artist, '-', song.title);\n    }\n\n    /**\n     * Handle state update from server\n     * @param {Object} data - State data\n     */\n    function handleStateUpdate(data) {\n        var phase = data.phase;\n\n        // Apply language from game state (Story 12.5, 16.3)\n        // Must re-render after language loads to update dynamic content\n        // Guard: skip if i18n unavailable\n        if (typeof BeatifyI18n !== 'undefined' && data.language && data.language !== BeatifyI18n.getLanguage()) {\n            BeatifyI18n.setLanguage(data.language).then(function() {\n                BeatifyI18n.initPageTranslations();\n                // Re-render current view with correct language\n                handleStateUpdate(data);\n            });\n            // Don't render yet - wait for language to load\n            return;\n        }\n\n        if (!phase || phase === 'END' && !data.game_id) {\n            // No active game\n            showView('dashboard-no-game');\n            stopCountdown();\n            return;\n        }\n\n        switch (phase) {\n            case 'LOBBY':\n                stopCountdown();\n                showView('dashboard-lobby');\n                renderLobbyView(data);\n                break;\n            case 'PLAYING':\n                showView('dashboard-playing');\n                renderPlayingView(data);\n                break;\n            case 'REVEAL':\n                stopCountdown();\n                showView('dashboard-reveal');\n                renderRevealView(data);\n                break;\n            case 'END':\n                stopCountdown();\n                showView('dashboard-end');\n                renderEndView(data);\n                break;\n            case 'PAUSED':\n                stopCountdown();\n                showView('dashboard-paused');\n                break;\n            default:\n                console.log('[Dashboard] Unknown phase:', phase);\n        }\n    }\n\n    // ============================================\n    // Lobby View (AC 10.4.2)\n    // ============================================\n\n    /**\n     * Render lobby view with QR code and player list\n     * @param {Object} data - State data\n     */\n    function renderLobbyView(data) {\n        var players = data.players || [];\n\n        // Render QR code\n        if (data.join_url) {\n            renderQRCode(data.join_url);\n        }\n\n        // Render game settings indicator (top-right corner)\n        renderGameSettings(data);\n\n        // Update player count\n        var countEl = document.getElementById('dashboard-player-count');\n        if (countEl) {\n            var count = players.length;\n            countEl.textContent = count + ' player' + (count !== 1 ? 's' : '') + ' joined';\n        }\n\n        // Render player list with slide-in animation\n        renderPlayerList(players);\n    }\n\n    /**\n     * Render game settings indicator (rounds, difficulty)\n     * @param {Object} data - State data with total_rounds and difficulty\n     */\n    function renderGameSettings(data) {\n        var el = document.getElementById('dashboard-game-settings');\n        if (!el) return;\n\n        var rounds = data.total_rounds || 10;\n        var difficulty = data.difficulty || 'normal';\n\n        // Translate difficulty label\n        var difficultyLabel = t('admin.difficulty' + difficulty.charAt(0).toUpperCase() + difficulty.slice(1), difficulty);\n\n        el.textContent = rounds + ' ' + utils.t('dashboard.rounds', 'rounds') + ' \u2022 ' + difficultyLabel;\n    }\n\n    /**\n     * Render QR code for joining game\n     * @param {string} joinUrl - URL to encode\n     */\n    function renderQRCode(joinUrl) {\n        var container = document.getElementById('dashboard-qr-code');\n        if (!container) return;\n\n        // Skip re-render if URL hasn't changed (prevents flicker)\n        if (joinUrl === lastQRCodeUrl) return;\n        lastQRCodeUrl = joinUrl;\n\n        // Clear previous\n        container.innerHTML = '';\n\n        if (typeof QRCode !== 'undefined') {\n            new QRCode(container, {\n                text: joinUrl,\n                width: 200,\n                height: 200,\n                colorDark: '#000000',\n                colorLight: '#ffffff',\n                correctLevel: QRCode.CorrectLevel.M\n            });\n        } else {\n            container.innerHTML = '<p>QR code unavailable</p>';\n        }\n    }\n\n    /**\n     * Render player list in lobby\n     * @param {Array} players - Array of player objects\n     */\n    function renderPlayerList(players) {\n        var listEl = document.getElementById('dashboard-player-list');\n        if (!listEl) return;\n\n        // Story 11.4: Sort players - connected first, then disconnected\n        var sortedPlayers = players.slice().sort(function(a, b) {\n            if (a.connected !== b.connected) {\n                return a.connected ? -1 : 1;\n            }\n            return 0;\n        });\n\n        // Find new players\n        var previousNames = previousPlayers.map(function(p) { return p.name; });\n        var newNames = sortedPlayers\n            .filter(function(p) { return previousNames.indexOf(p.name) === -1; })\n            .map(function(p) { return p.name; });\n\n        // Render player cards\n        listEl.innerHTML = sortedPlayers.map(function(player) {\n            var isNew = newNames.indexOf(player.name) !== -1;\n            var isDisconnected = player.connected === false;\n            var classes = ['dashboard-player-card'];\n            if (isNew) classes.push('is-new');\n            if (isDisconnected) classes.push('dashboard-player-card--disconnected');\n\n            var awayBadge = isDisconnected ? '<span class=\"away-badge\">(away)</span>' : '';\n\n            return '<div class=\"' + classes.join(' ') + '\">' +\n                utils.escapeHtml(player.name) + awayBadge +\n            '</div>';\n        }).join('');\n\n        // Remove is-new class after animation\n        setTimeout(function() {\n            var newCards = listEl.querySelectorAll('.is-new');\n            for (var i = 0; i < newCards.length; i++) {\n                newCards[i].classList.remove('is-new');\n            }\n        }, 2000);\n\n        previousPlayers = players.slice();\n    }\n\n    // ============================================\n    // Playing View (AC 10.4.3)\n    // ============================================\n\n    /**\n     * Render playing view with blurred album art, timer, and leaderboard\n     * @param {Object} data - State data\n     */\n    function renderPlayingView(data) {\n        var song = data.song || {};\n        var players = data.players || [];\n\n        // Update round indicator\n        var currentRound = document.getElementById('dashboard-current-round');\n        var totalRounds = document.getElementById('dashboard-total-rounds');\n        if (currentRound) currentRound.textContent = data.round || 1;\n        if (totalRounds) totalRounds.textContent = data.total_rounds || 10;\n\n        // Update album art (blurred - AC 10.4.3)\n        var albumArt = document.getElementById('dashboard-album-art');\n        if (albumArt) {\n            albumArt.src = song.album_art || '/beatify/static/img/no-artwork.svg';\n            albumArt.onerror = function() {\n                this.src = '/beatify/static/img/no-artwork.svg';\n            };\n        }\n\n        // Start countdown\n        if (data.deadline) {\n            startCountdown(data.deadline);\n        }\n\n        // Render leaderboard with submission indicators and bet badges\n        renderLeaderboard(data.leaderboard || [], players, 'dashboard-leaderboard', true, true);\n\n        // Update round statistics (Story 16.4)\n        renderRoundStats(data, players);\n    }\n\n    /**\n     * Render round statistics below leaderboard (Story 16.4)\n     * @param {Object} data - State data\n     * @param {Array} players - Players array\n     */\n    function renderRoundStats(data, players) {\n        console.log('[Dashboard] renderRoundStats called, players:', players);\n        console.log('[Dashboard] data.players:', data.players);\n\n        // Calculate submission count\n        var submitted = 0;\n        var total = players.length;\n        players.forEach(function(p) {\n            if (p.submitted) submitted++;\n        });\n\n        console.log('[Dashboard] Submissions:', submitted, '/', total);\n\n        var submissionsEl = document.getElementById('dashboard-submissions');\n        if (submissionsEl) {\n            submissionsEl.textContent = submitted + '/' + total;\n            console.log('[Dashboard] Updated submissions element');\n        } else {\n            console.warn('[Dashboard] dashboard-submissions element not found');\n        }\n\n        // Time remaining is already shown in the main timer, but we update the stat too\n        var timeEl = document.getElementById('dashboard-time-remaining');\n        if (timeEl && data.deadline) {\n            var remaining = Math.max(0, Math.ceil((data.deadline - Date.now()) / 1000));\n            timeEl.textContent = remaining + 's';\n        }\n    }\n\n    /**\n     * Start countdown timer (AC 10.4.3)\n     * @param {number} deadline - Server deadline timestamp in milliseconds\n     */\n    function startCountdown(deadline) {\n        stopCountdown();\n\n        var timerElement = document.getElementById('dashboard-timer');\n        var timeStatEl = document.getElementById('dashboard-time-remaining');\n        if (!timerElement) return;\n\n        timerElement.classList.remove('timer--warning', 'timer--critical');\n\n        function updateCountdown() {\n            var now = Date.now();\n            var remaining = Math.max(0, Math.ceil((deadline - now) / 1000));\n\n            timerElement.textContent = remaining;\n\n            // Also update round stats time (Story 16.4)\n            if (timeStatEl) {\n                timeStatEl.textContent = remaining + 's';\n            }\n\n            // Update timer style based on remaining time (AC 10.4.3)\n            if (remaining <= 5) {\n                timerElement.classList.remove('timer--warning');\n                timerElement.classList.add('timer--critical');\n            } else if (remaining <= 10) {\n                timerElement.classList.remove('timer--critical');\n                timerElement.classList.add('timer--warning');\n            } else {\n                timerElement.classList.remove('timer--warning', 'timer--critical');\n            }\n\n            if (remaining <= 0) {\n                stopCountdown();\n            }\n        }\n\n        updateCountdown();\n        countdownInterval = setInterval(updateCountdown, 1000);\n    }\n\n    /**\n     * Stop countdown timer\n     */\n    function stopCountdown() {\n        if (countdownInterval) {\n            clearInterval(countdownInterval);\n            countdownInterval = null;\n        }\n    }\n\n    /**\n     * Render leaderboard\n     * @param {Array} leaderboard - Leaderboard entries\n     * @param {Array} players - Players list (for submission status)\n     * @param {string} containerId - Container element ID\n     * @param {boolean} showSubmitted - Whether to show submission indicators\n     * @param {boolean} showBet - Whether to show bet badges next to names\n     */\n    function renderLeaderboard(leaderboard, players, containerId, showSubmitted, showBet) {\n        var container = document.getElementById(containerId);\n        if (!container) return;\n\n        // Build player submission and bet maps\n        var submissionMap = {};\n        var betMap = {};\n        if (players) {\n            players.forEach(function(p) {\n                submissionMap[p.name] = p.submitted;\n                betMap[p.name] = p.bet;\n            });\n        }\n\n        var html = '';\n        leaderboard.forEach(function(entry) {\n            var rankClass = entry.rank <= 3 ? 'is-top-' + entry.rank : '';\n\n            // Rank change animation class\n            var animationClass = '';\n            if (entry.rank_change > 0) {\n                animationClass = 'leaderboard-entry--climbing';\n            } else if (entry.rank_change < 0) {\n                animationClass = 'leaderboard-entry--falling';\n            }\n\n            // Story 11.4: Disconnected player styling\n            var disconnectedClass = entry.connected === false ? 'leaderboard-entry--disconnected' : '';\n            var awayBadge = entry.connected === false ? '<span class=\"away-badge\">(away)</span>' : '';\n\n            // Rank change indicator (AC 10.4.4 - with arrows)\n            var changeIndicator = '';\n            if (entry.rank_change > 0) {\n                changeIndicator = '<span class=\"rank-up\">\u25B2' + entry.rank_change + '</span>';\n            } else if (entry.rank_change < 0) {\n                changeIndicator = '<span class=\"rank-down\">\u25BC' + Math.abs(entry.rank_change) + '</span>';\n            }\n\n            // Streak indicator (AC 10.4.3 - with fire emoji)\n            var streakIndicator = '';\n            if (entry.streak >= 2) {\n                var hotClass = entry.streak >= 5 ? 'streak-indicator--hot' : '';\n                streakIndicator = '<span class=\"streak-indicator ' + hotClass + '\">\uD83D\uDD25' + entry.streak + '</span>';\n            }\n\n            // Bet badge next to name during playing phase\n            var betBadge = '';\n            if (showBet && betMap[entry.name]) {\n                betBadge = '<span class=\"bet-badge\">BET</span>';\n            }\n\n            // Submission indicator (AC 10.4.3)\n            var submittedIndicator = '';\n            if (showSubmitted) {\n                var isSubmitted = submissionMap[entry.name] === true;\n                submittedIndicator = '<div class=\"entry-submitted ' + (isSubmitted ? 'is-submitted' : '') + '\"></div>';\n            }\n\n            html += '<div class=\"leaderboard-entry ' + rankClass + ' ' + animationClass + ' ' + disconnectedClass + '\">' +\n                '<span class=\"entry-rank\">#' + entry.rank + '</span>' +\n                '<span class=\"entry-name\">' + utils.escapeHtml(entry.name) + awayBadge + betBadge + '</span>' +\n                '<span class=\"entry-meta\">' +\n                    streakIndicator +\n                    changeIndicator +\n                '</span>' +\n                '<span class=\"entry-score\">' + entry.score + '</span>' +\n                submittedIndicator +\n            '</div>';\n        });\n\n        container.innerHTML = html;\n    }\n\n    // ============================================\n    // Reveal View (AC 10.4.4)\n    // ============================================\n\n    /**\n     * Render reveal view with song info and leaderboard\n     * @param {Object} data - State data\n     */\n    function renderRevealView(data) {\n        var song = data.song || {};\n        var players = data.players || [];\n\n        // Update album art (clear - no blur)\n        var albumArt = document.getElementById('reveal-album-art');\n        if (albumArt) {\n            albumArt.src = song.album_art || '/beatify/static/img/no-artwork.svg';\n            albumArt.onerror = function() {\n                this.src = '/beatify/static/img/no-artwork.svg';\n            };\n        }\n\n        // Update song info\n        var artistEl = document.getElementById('reveal-artist');\n        var titleEl = document.getElementById('reveal-title');\n        var yearEl = document.getElementById('reveal-year');\n\n        if (artistEl) artistEl.textContent = song.artist || 'Unknown Artist';\n        if (titleEl) titleEl.textContent = song.title || 'Unknown Song';\n        if (yearEl) yearEl.textContent = song.year || '????';\n\n        // Render fun fact (Story 16.4)\n        renderFunFact(song);\n\n        // Render top 3 guesses this round (AC 10.4.4)\n        renderTopGuesses(players);\n\n        // Render leaderboard with position changes\n        renderRevealLeaderboard(data.leaderboard || []);\n\n        // Render motivational message (Story 14.4)\n        renderMotivationalMessage(data.game_performance);\n\n        // Render song difficulty rating (Story 15.1)\n        renderSongDifficulty(data.song_difficulty);\n\n        // Story 14.5 (AC1, AC2, AC7): Trigger celebration confetti on dashboard\n        // M1 fix: Prioritize record over exact to avoid duplicate confetti\n        if (data.game_performance && data.game_performance.is_new_record) {\n            triggerConfetti('record');\n        } else {\n            // Check for any exact guesses this round\n            var hasExactGuess = players.some(function(p) {\n                return p.years_off === 0 && !p.missed_round;\n            });\n            if (hasExactGuess) {\n                triggerConfetti('exact');\n            }\n        }\n    }\n\n    /**\n     * Render fun fact below year in reveal view (Story 16.4, 16.3)\n     * @param {Object} song - Song data with optional fun_fact\n     */\n    function renderFunFact(song) {\n        var container = document.getElementById('dashboard-fun-fact');\n        var textEl = document.getElementById('dashboard-fun-fact-text');\n\n        // Get localized fun fact (Story 16.3)\n        var funFact = utils.getLocalizedSongField(song, 'fun_fact');\n\n        console.log('[Dashboard] renderFunFact called with song:', song);\n        console.log('[Dashboard] fun_fact value:', funFact || 'no fun fact');\n\n        if (!container || !textEl) {\n            console.warn('[Dashboard] Fun fact elements not found');\n            return;\n        }\n\n        // Hide if no fun fact\n        if (!funFact || funFact.trim() === '') {\n            container.classList.add('hidden');\n            console.log('[Dashboard] No fun_fact, hiding container');\n            return;\n        }\n\n        // Show fun fact\n        textEl.textContent = funFact;\n        container.classList.remove('hidden');\n        console.log('[Dashboard] Fun fact shown:', funFact);\n    }\n\n    /**\n     * Render motivational message during reveal phase (Story 14.4)\n     * @param {Object|null} performance - Game performance data from state\n     */\n    function renderMotivationalMessage(performance) {\n        var container = document.getElementById('reveal-motivational');\n        if (!container) return;\n\n        // Hide if no performance data or no message\n        if (!performance || !performance.message) {\n            container.classList.add('hidden');\n            return;\n        }\n\n        var message = performance.message;\n        var iconEl = container.querySelector('.motivational-icon');\n        var textEl = container.querySelector('.motivational-text');\n\n        // Set type-based styling and icon\n        container.className = 'motivational-message motivational-message--' + message.type;\n\n        // Icons for different message types\n        var icons = {\n            'first': '\uD83C\uDF1F',\n            'record': '\uD83C\uDFC6',\n            'strong': '\uD83D\uDD25',\n            'above': '\uD83D\uDCC8',\n            'close': '\uD83D\uDCAA'\n        };\n        if (iconEl) iconEl.textContent = icons[message.type] || '';\n        if (textEl) textEl.textContent = message.message || '';\n    }\n\n    /**\n     * Render song difficulty rating (Story 15.1)\n     * @param {Object|null} difficulty - Difficulty data with stars, label, accuracy, times_played\n     */\n    function renderSongDifficulty(difficulty) {\n        var el = document.getElementById('song-difficulty');\n        if (!el) return;\n\n        // Hide if no difficulty data (AC4: insufficient plays)\n        if (!difficulty) {\n            el.classList.add('hidden');\n            return;\n        }\n\n        // Build stars string\n        var stars = '';\n        for (var i = 0; i < difficulty.stars; i++) {\n            stars += '<span class=\"star\">&#9733;</span>';\n        }\n\n        // Render difficulty display\n        el.innerHTML =\n            '<div class=\"difficulty-stars difficulty-' + difficulty.stars + '\">' + stars + '</div>' +\n            '<span class=\"difficulty-label\">' + utils.t('difficulty.' + difficulty.label) + '</span>' +\n            '<span class=\"difficulty-accuracy\">' + difficulty.accuracy + '% ' + utils.t('difficulty.accuracy') + '</span>';\n\n        el.classList.remove('hidden');\n    }\n\n    /**\n     * Render top 3 guesses this round\n     * @param {Array} players - Players with round results\n     */\n    function renderTopGuesses(players) {\n        var container = document.getElementById('reveal-top-guesses-list');\n        if (!container) return;\n\n        // Sort by round_score descending, take top 3\n        var sorted = players\n            .filter(function(p) { return !p.missed_round; })\n            .sort(function(a, b) {\n                return (b.round_score || 0) - (a.round_score || 0);\n            })\n            .slice(0, 3);\n\n        var html = '';\n        sorted.forEach(function(player, index) {\n            // Show guessed year in brackets\n            var yearDisplay = player.guess ? '<span class=\"top-guess-year\">(' + player.guess + ')</span>' : '';\n\n            // Show BET badge with outcome\n            var betBadge = '';\n            if (player.bet) {\n                var badgeClass = 'bet-badge';\n                if (player.bet_outcome === 'won') badgeClass += ' bet-badge--won';\n                else if (player.bet_outcome === 'lost') badgeClass += ' bet-badge--lost';\n                betBadge = '<span class=\"' + badgeClass + '\">BET</span>';\n            }\n\n            html += '<div class=\"top-guess-entry\">' +\n                '<span class=\"top-guess-rank\">#' + (index + 1) + '</span>' +\n                '<span class=\"top-guess-name\">' + utils.escapeHtml(player.name) + yearDisplay + '</span>' +\n                '<span class=\"top-guess-points\">+' + (player.round_score || 0) + betBadge + '</span>' +\n            '</div>';\n        });\n\n        container.innerHTML = html;\n    }\n\n    /**\n     * Render reveal leaderboard with position change indicators (AC 10.4.4)\n     * @param {Array} leaderboard - Leaderboard entries\n     */\n    function renderRevealLeaderboard(leaderboard) {\n        var container = document.getElementById('reveal-leaderboard');\n        if (!container) return;\n\n        var html = '';\n        leaderboard.forEach(function(entry) {\n            var rankClass = entry.rank <= 3 ? 'is-top-' + entry.rank : '';\n\n            // Rank change animation\n            var animationClass = '';\n            if (entry.rank_change > 0) {\n                animationClass = 'leaderboard-entry--climbing';\n            } else if (entry.rank_change < 0) {\n                animationClass = 'leaderboard-entry--falling';\n            }\n\n            // Story 11.4: Disconnected player styling\n            var disconnectedClass = entry.connected === false ? 'leaderboard-entry--disconnected' : '';\n            var awayBadge = entry.connected === false ? '<span class=\"away-badge\">(away)</span>' : '';\n\n            // Position change indicator (AC 10.4.4 - with arrows)\n            var changeHtml = '';\n            if (entry.rank_change > 0) {\n                changeHtml = '<span class=\"entry-change is-positive\">\u25B2' + entry.rank_change + '</span>';\n            } else if (entry.rank_change < 0) {\n                changeHtml = '<span class=\"entry-change is-negative\">\u25BC' + Math.abs(entry.rank_change) + '</span>';\n            }\n\n            // Streak indicator (AC 10.4.3 - with fire emoji)\n            var streakIndicator = '';\n            if (entry.streak >= 2) {\n                var hotClass = entry.streak >= 5 ? 'streak-indicator--hot' : '';\n                streakIndicator = '<span class=\"streak-indicator ' + hotClass + '\">\uD83D\uDD25' + entry.streak + '</span>';\n            }\n\n            html += '<div class=\"leaderboard-entry ' + rankClass + ' ' + animationClass + ' ' + disconnectedClass + '\">' +\n                '<span class=\"entry-rank\">#' + entry.rank + '</span>' +\n                '<span class=\"entry-name\">' + utils.escapeHtml(entry.name) + awayBadge + '</span>' +\n                '<span class=\"entry-meta\">' +\n                    streakIndicator +\n                    changeHtml +\n                '</span>' +\n                '<span class=\"entry-score\">' + entry.score + '</span>' +\n            '</div>';\n        });\n\n        container.innerHTML = html;\n    }\n\n    // ============================================\n    // End View (AC 10.4.5)\n    // ============================================\n\n    /**\n     * Render end view with podium and final leaderboard\n     * @param {Object} data - State data\n     */\n    function renderEndView(data) {\n        var leaderboard = data.leaderboard || [];\n\n        // Update podium (AC 10.4.5)\n        [1, 2, 3].forEach(function(place) {\n            var player = leaderboard.find(function(p) { return p.rank === place; });\n            var nameEl = document.getElementById('end-podium-' + place + '-name');\n            var scoreEl = document.getElementById('end-podium-' + place + '-score');\n\n            if (nameEl) nameEl.textContent = player ? utils.escapeHtml(player.name) : '---';\n            if (scoreEl) scoreEl.textContent = player ? player.score : '0';\n        });\n\n        // Render stats comparison (Story 14.4)\n        renderStatsComparison(data.game_performance);\n\n        // Render superlatives / fun awards (Story 15.2)\n        renderSuperlatives(data.superlatives);\n\n        // Story 14.5 (AC3, AC7): Trigger winner confetti on dashboard\n        // H2 fix: Only trigger if there's a valid winner with score > 0\n        var winner = leaderboard.find(function(p) { return p.rank === 1; });\n        if (winner && winner.score > 0) {\n            triggerConfetti('winner');\n        }\n\n        // Render full leaderboard (Story 11.4: disconnected styling)\n        var container = document.getElementById('end-leaderboard');\n        if (container) {\n            var html = '';\n            leaderboard.forEach(function(entry) {\n                var rankClass = entry.rank <= 3 ? 'is-top-' + entry.rank : '';\n                var disconnectedClass = entry.connected === false ? 'leaderboard-entry--disconnected' : '';\n                var awayBadge = entry.connected === false ? '<span class=\"away-badge\">(away)</span>' : '';\n\n                html += '<div class=\"leaderboard-entry ' + rankClass + ' ' + disconnectedClass + '\">' +\n                    '<span class=\"entry-rank\">#' + entry.rank + '</span>' +\n                    '<span class=\"entry-name\">' + utils.escapeHtml(entry.name) + awayBadge + '</span>' +\n                    '<span class=\"entry-score\">' + entry.score + '</span>' +\n                '</div>';\n            });\n\n            container.innerHTML = html;\n        }\n    }\n\n    /**\n     * Render stats comparison for end screen (Story 14.4)\n     * @param {Object|null} performance - Game performance data from state\n     */\n    function renderStatsComparison(performance) {\n        var container = document.getElementById('end-stats-comparison');\n        if (!container) return;\n\n        // Hide if no performance data\n        if (!performance) {\n            container.classList.add('hidden');\n            return;\n        }\n\n        var iconEl = container.querySelector('.stats-comparison-icon');\n        var textEl = container.querySelector('.stats-comparison-text');\n\n        // Build comparison text based on performance\n        var icon = '';\n        var text = '';\n        var cssClass = 'stats-comparison';\n\n        if (performance.is_first_game) {\n            icon = '\uD83C\uDF1F';\n            text = 'First game recorded! Avg: ' + performance.current_avg.toFixed(1) + ' pts/round';\n            cssClass += ' stats-comparison--first';\n        } else if (performance.is_new_record) {\n            icon = '\uD83C\uDFC6';\n            text = 'NEW RECORD! ' + performance.current_avg.toFixed(1) + ' pts/round (prev: ' + performance.all_time_avg.toFixed(1) + ')';\n            cssClass += ' stats-comparison--record';\n        } else if (performance.is_above_average) {\n            icon = '\uD83D\uDCC8';\n            text = performance.current_avg.toFixed(1) + ' pts/round (+' + performance.difference.toFixed(1) + ' vs all-time avg)';\n            cssClass += ' stats-comparison--above';\n        } else {\n            icon = '\uD83D\uDCCA';\n            text = performance.current_avg.toFixed(1) + ' pts/round (' + performance.difference.toFixed(1) + ' vs all-time avg)';\n            cssClass += ' stats-comparison--below';\n        }\n\n        container.className = cssClass;\n        if (iconEl) iconEl.textContent = icon;\n        if (textEl) textEl.textContent = text;\n    }\n\n    /**\n     * Render superlatives / fun awards (Story 15.2)\n     * @param {Array|null} superlatives - Array of award objects from state\n     */\n    function renderSuperlatives(superlatives) {\n        var container = document.getElementById('superlatives-container');\n        if (!container) return;\n\n        // Hide if no superlatives\n        if (!superlatives || superlatives.length === 0) {\n            container.classList.add('hidden');\n            return;\n        }\n\n        var html = '';\n        superlatives.forEach(function(award, index) {\n            var valueText = '';\n            switch (award.value_label) {\n                case 'avg_time':\n                    valueText = award.value + 's ' + utils.t('superlatives.avgTime');\n                    break;\n                case 'streak':\n                    valueText = award.value + ' ' + utils.t('superlatives.streak');\n                    break;\n                case 'bets':\n                    valueText = award.value + ' ' + utils.t('superlatives.bets');\n                    break;\n                case 'points':\n                    valueText = award.value + ' ' + utils.t('superlatives.points');\n                    break;\n                case 'close_guesses':\n                    valueText = award.value + ' ' + utils.t('superlatives.closeGuesses');\n                    break;\n                default:\n                    valueText = award.value;\n            }\n\n            html += '<div class=\"superlative-card superlative-card--' + award.id + '\" style=\"animation-delay: ' + (index * 0.2) + 's\">' +\n                '<div class=\"superlative-emoji\">' + award.emoji + '</div>' +\n                '<div class=\"superlative-title\">' + utils.t('superlatives.' + award.title) + '</div>' +\n                '<div class=\"superlative-player\">' + utils.escapeHtml(award.player_name) + '</div>' +\n                '<div class=\"superlative-value\">' + valueText + '</div>' +\n            '</div>';\n        });\n\n        container.innerHTML = html;\n        container.classList.remove('hidden');\n    }\n\n    // ============================================\n    // Confetti System (Story 14.5 - AC7)\n    // ============================================\n\n    // Track active animations for cleanup (M3 fix)\n    var confettiAnimationId = null;\n    var confettiIntervalId = null;\n\n    /**\n     * Trigger confetti celebration animation (Story 14.5)\n     * Uses canvas-confetti library for various celebration types\n     * @param {string} type - 'exact', 'record', 'winner', or 'perfect'\n     */\n    function triggerConfetti(type) {\n        // AC5: Respect accessibility preference\n        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {\n            return;\n        }\n\n        // Check if confetti library is loaded\n        if (typeof confetti === 'undefined') {\n            console.warn('[Dashboard Confetti] Library not loaded');\n            return;\n        }\n\n        // Stop any existing animation before starting new one (M3 fix)\n        stopConfetti();\n\n        type = type || 'exact';\n\n        switch (type) {\n            case 'exact':\n                // AC1: Gold burst for exact guess, 2 seconds (H1 fix - enforced duration)\n                var exactDuration = 2 * 1000;\n                var exactEnd = Date.now() + exactDuration;\n                (function exactFrame() {\n                    confetti({\n                        particleCount: 15,\n                        spread: 70,\n                        origin: { y: 0.6 },\n                        colors: ['#FFD700', '#FFA500', '#FFEC8B']\n                    });\n                    if (Date.now() < exactEnd) {\n                        confettiAnimationId = requestAnimationFrame(exactFrame);\n                    }\n                }());\n                break;\n\n            case 'record':\n                // AC2: Rainbow shower for new record, 3 seconds (H1 fix - enforced duration)\n                var recordDuration = 3 * 1000;\n                var recordEnd = Date.now() + recordDuration;\n                (function recordFrame() {\n                    confetti({\n                        particleCount: 10,\n                        spread: 180,\n                        origin: { y: 0.3, x: Math.random() },\n                        colors: ['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#0000ff', '#8b00ff']\n                    });\n                    if (Date.now() < recordEnd) {\n                        confettiAnimationId = requestAnimationFrame(recordFrame);\n                    }\n                }());\n                break;\n\n            case 'winner':\n                // AC3: Dual-side fireworks for winner, 4 seconds\n                var winnerDuration = 4 * 1000;\n                var winnerEnd = Date.now() + winnerDuration;\n                (function winnerFrame() {\n                    confetti({\n                        particleCount: 10,\n                        angle: 60,\n                        spread: 55,\n                        origin: { x: 0 },\n                        colors: ['#ff2d6a', '#00f5ff', '#00ff88', '#ffdd00']\n                    });\n                    confetti({\n                        particleCount: 10,\n                        angle: 120,\n                        spread: 55,\n                        origin: { x: 1 },\n                        colors: ['#ff2d6a', '#00f5ff', '#00ff88', '#ffdd00']\n                    });\n                    if (Date.now() < winnerEnd) {\n                        confettiAnimationId = requestAnimationFrame(winnerFrame);\n                    }\n                }());\n                break;\n\n            case 'perfect':\n                // AC4: Epic celebration for perfect game, 5 seconds\n                var perfectDuration = 5 * 1000;\n                var perfectEnd = Date.now() + perfectDuration;\n\n                // M4 fix: Use setInterval for reliable center bursts\n                confettiIntervalId = setInterval(function() {\n                    confetti({\n                        particleCount: 30,\n                        spread: 100,\n                        origin: { y: 0.6 },\n                        colors: ['#FFD700', '#FFA500', '#FFEC8B']\n                    });\n                }, 500);\n\n                // Clear interval when duration ends\n                setTimeout(function() {\n                    if (confettiIntervalId) {\n                        clearInterval(confettiIntervalId);\n                        confettiIntervalId = null;\n                    }\n                }, perfectDuration);\n\n                (function perfectFrame() {\n                    confetti({\n                        particleCount: 7,\n                        angle: 60,\n                        spread: 55,\n                        origin: { x: 0 },\n                        colors: ['#FFD700', '#ff2d6a', '#00f5ff', '#00ff88']\n                    });\n                    confetti({\n                        particleCount: 7,\n                        angle: 120,\n                        spread: 55,\n                        origin: { x: 1 },\n                        colors: ['#FFD700', '#ff2d6a', '#00f5ff', '#00ff88']\n                    });\n                    if (Date.now() < perfectEnd) {\n                        confettiAnimationId = requestAnimationFrame(perfectFrame);\n                    }\n                }());\n                break;\n\n            default:\n                console.warn('[Dashboard Confetti] Unknown type:', type);\n        }\n    }\n\n    /**\n     * Stop any ongoing confetti animations (M3 fix - proper cleanup)\n     */\n    function stopConfetti() {\n        if (confettiAnimationId) {\n            cancelAnimationFrame(confettiAnimationId);\n            confettiAnimationId = null;\n        }\n        if (confettiIntervalId) {\n            clearInterval(confettiIntervalId);\n            confettiIntervalId = null;\n        }\n        if (typeof confetti !== 'undefined' && confetti.reset) {\n            confetti.reset();\n        }\n    }\n\n    // ============================================\n    // Live Reactions (Story 18.9)\n    // ============================================\n\n    /**\n     * Show a floating reaction bubble on the dashboard\n     * @param {string} playerName - Name of the player who reacted\n     * @param {string} emoji - The emoji reaction\n     */\n    function showFloatingReaction(playerName, emoji) {\n        var container = document.getElementById('reaction-container');\n        if (!container) return;\n\n        var bubble = document.createElement('div');\n        bubble.className = 'reaction-bubble';\n        bubble.textContent = playerName + ' ' + emoji;\n\n        // Random horizontal position (20% to 80% of screen width)\n        bubble.style.left = (20 + Math.random() * 60) + '%';\n\n        container.appendChild(bubble);\n\n        // Remove after animation completes (3s)\n        setTimeout(function() {\n            bubble.remove();\n        }, 3000);\n    }\n\n    // ============================================\n    // Initialization\n    // ============================================\n\n    /**\n     * Initialize dashboard\n     */\n    async function init() {\n        console.log('[Dashboard] Initializing...');\n        // Initialize i18n (Story 12.5)\n        // Guard clause: wait for BeatifyI18n in case fallback script is loading\n        var i18nAvailable = await utils.waitForI18n();\n        if (!i18nAvailable) {\n            console.error('[Dashboard] BeatifyI18n module failed to load - UI will use fallback text');\n        } else {\n            await BeatifyI18n.init();\n            BeatifyI18n.initPageTranslations();\n        }\n        connectWebSocket();\n    }\n\n    // Start when DOM is ready\n    if (document.readyState === 'loading') {\n        document.addEventListener('DOMContentLoaded', init);\n    } else {\n        init();\n    }\n\n    // ============================================\n    // Service Worker Registration (Story 18.5)\n    // ============================================\n\n    /**\n     * Register service worker for asset caching\n     */\n    if ('serviceWorker' in navigator) {\n        window.addEventListener('load', function() {\n            navigator.serviceWorker.register('/beatify/static/sw.js', {\n                scope: '/beatify/'\n            }).then(function(registration) {\n                console.log('[Dashboard] SW registered:', registration.scope);\n            }).catch(function(error) {\n                console.warn('[Dashboard] SW registration failed:', error);\n            });\n        });\n    }\n\n})();\n"],
  "mappings": "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",
  "names": ["utils", "loadingView", "noGameView", "lobbyView", "playingView", "revealView", "endView", "pausedView", "allViews", "ws", "reconnectAttempts", "MAX_RECONNECT_ATTEMPTS", "MAX_RECONNECT_DELAY_MS", "previousPlayers", "countdownInterval", "lastQRCodeUrl", "showView", "viewId", "getReconnectDelay", "connectWebSocket", "wsProtocol", "wsUrl", "event", "data", "handleServerMessage", "e", "delay", "err", "handleStateUpdate", "showFloatingReaction", "handleMetadataUpdate", "song", "albumArt", "newSrc", "preloader", "phase", "stopCountdown", "renderLobbyView", "renderPlayingView", "renderRevealView", "renderEndView", "players", "renderQRCode", "renderGameSettings", "countEl", "count", "renderPlayerList", "el", "rounds", "difficulty", "difficultyLabel", "joinUrl", "container", "listEl", "sortedPlayers", "a", "b", "previousNames", "p", "newNames", "player", "isNew", "isDisconnected", "classes", "awayBadge", "newCards", "i", "currentRound", "totalRounds", "startCountdown", "renderLeaderboard", "renderRoundStats", "submitted", "total", "submissionsEl", "timeEl", "remaining", "deadline", "timerElement", "timeStatEl", "updateCountdown", "now", "leaderboard", "containerId", "showSubmitted", "showBet", "submissionMap", "betMap", "html", "entry", "rankClass", "animationClass", "disconnectedClass", "changeIndicator", "streakIndicator", "hotClass", "betBadge", "submittedIndicator", "isSubmitted", "artistEl", "titleEl", "yearEl", "renderFunFact", "renderTopGuesses", "renderRevealLeaderboard", "renderMotivationalMessage", "renderSongDifficulty", "triggerConfetti", "hasExactGuess", "textEl", "funFact", "performance", "message", "iconEl", "icons", "stars", "sorted", "index", "yearDisplay", "badgeClass", "changeHtml", "place", "nameEl", "scoreEl", "renderStatsComparison", "renderSuperlatives", "winner", "icon", "text", "cssClass", "superlatives", "award", "valueText", "confettiAnimationId", "confettiIntervalId", "type", "stopConfetti", "exactDuration", "exactEnd", "exactFrame", "recordDuration", "recordEnd", "recordFrame", "winnerDuration", "winnerEnd", "winnerFrame", "perfectDuration", "perfectEnd", "perfectFrame", "playerName", "emoji", "bubble", "init", "__async", "i18nAvailable", "registration", "error"]
}

{
  "version": 3,
  "sources": ["admin.js"],
  "sourcesContent": ["/**\n * Beatify Admin Page\n * Vanilla JS - no frameworks\n */\n\n// Module-level state\nlet selectedPlaylists = [];\nlet playlistData = [];\nlet playlistDocsUrl = '';\nlet selectedMediaPlayer = null;  // { entityId: string, state: string } or null\nlet mediaPlayerDocsUrl = '';\n\n// View state management (Story 2.3)\nlet currentView = 'setup';\nlet currentGame = null;\nlet cachedQRUrl = null;\n\n// Language state (Story 12.4)\nlet selectedLanguage = 'en';\n\n// Timer state (Story 13.1)\nlet selectedDuration = 45;\n\n// Difficulty state (Story 14.1)\nlet selectedDifficulty = 'normal';\n\n// Provider state (Story 17.2)\nlet selectedProvider = 'spotify';\nlet hasMusicAssistant = false;\n\n// Artist Challenge state (Story 20.7)\nlet artistChallengeEnabled = true;\n\n// Lobby state (Story 16.8)\nlet previousLobbyPlayers = [];\nlet lobbyPollingInterval = null;\n\n// Setup sections to hide/show as a group (Story 9.10: game-controls removed, button is standalone)\nconst setupSections = ['media-players', 'playlists', 'provider-section', 'language-section', 'timer-section', 'difficulty-section', 'artist-challenge-section'];\n\n// Alias BeatifyUtils for convenience\nconst utils = window.BeatifyUtils || {};\n\ndocument.addEventListener('DOMContentLoaded', async () => {\n    // Initialize i18n based on browser language (Story 12.4)\n    // Guard clause: wait for BeatifyI18n in case fallback script is loading\n    const i18nAvailable = await utils.waitForI18n();\n    if (!i18nAvailable) {\n        console.error('[Beatify] BeatifyI18n module failed to load - UI will use fallback text');\n    } else {\n        await BeatifyI18n.init();\n        BeatifyI18n.initPageTranslations();\n        selectedLanguage = BeatifyI18n.getLanguage();\n    }\n    updateLanguageButtons(selectedLanguage);\n\n    // Wire event listeners\n    document.getElementById('start-game')?.addEventListener('click', startGame);\n    document.getElementById('print-qr')?.addEventListener('click', printQRCode);\n    document.getElementById('rejoin-game')?.addEventListener('click', rejoinGame);\n\n    // Dashboard URL is now set in showLobbyView() for analytics layout\n    document.getElementById('end-game')?.addEventListener('click', endGame);\n    document.getElementById('end-game-lobby')?.addEventListener('click', endGame);\n\n    // Admin join setup\n    setupAdminJoin();\n\n    // End game modal setup (Story 9.10)\n    setupEndGameModal();\n\n    // Language selector setup (Story 12.4)\n    setupLanguageSelector();\n\n    // Timer selector setup (Story 13.1)\n    setupTimerSelector();\n\n    // Difficulty selector setup (Story 14.1)\n    setupDifficultySelector();\n\n    // Provider selector setup (Story 17.2)\n    setupProviderSelector();\n\n    // Artist Challenge toggle setup (Story 20.7)\n    setupArtistChallengeToggle();\n\n    await loadStatus();\n});\n\n/**\n * Fetch and render current status from the API\n */\nasync function loadStatus() {\n    try {\n        const response = await fetch('/beatify/api/status');\n\n        if (!response.ok) {\n            throw new Error(`HTTP ${response.status}`);\n        }\n\n        const status = await response.json();\n\n        playlistDocsUrl = status.playlist_docs_url || '';\n        mediaPlayerDocsUrl = status.media_player_docs_url || '';\n        // Set Music Assistant availability from backend (not based on entity names)\n        hasMusicAssistant = status.has_music_assistant === true;\n        // Display version in footer\n        const versionEl = document.getElementById('app-version');\n        if (versionEl && status.version) {\n            versionEl.textContent = 'v' + status.version;\n        }\n        renderMediaPlayers(status.media_players);\n        renderPlaylists(status.playlists, status.playlist_dir);\n        updateStartButtonState();\n\n        // Check for active game and show appropriate view\n        if (status.active_game) {\n            showExistingGameView(status.active_game);\n        } else {\n            showSetupView();\n        }\n    } catch (error) {\n        console.error('Failed to load status:', error);\n        const container = document.getElementById('media-players-list');\n        if (container) {\n            container.innerHTML = '<span class=\"status-error\">Failed to load status</span>';\n        }\n    }\n}\n\n/**\n * Render media players list with radio buttons for selection\n * Filters out unavailable players\n * @param {Array} players\n */\nfunction renderMediaPlayers(players) {\n    const container = document.getElementById('media-players-list');\n    // Remove data-i18n to prevent initPageTranslations from overwriting rendered content\n    container?.removeAttribute('data-i18n');\n    const totalPlayers = players ? players.length : 0;\n\n    // Reset selection state\n    selectedMediaPlayer = null;\n\n    // Note: hasMusicAssistant is now set from backend status API (not based on entity names)\n\n    // Filter out unavailable players\n    const availablePlayers = (players || []).filter(p => p.state !== 'unavailable');\n\n    // Hide validation message when showing empty states (avoid redundant messaging)\n    const validationMsg = document.getElementById('media-player-validation-msg');\n\n    if (totalPlayers === 0) {\n        // AC2: No players configured at all\n        const docsLink = mediaPlayerDocsUrl\n            ? `<a href=\"${utils.escapeHtml(mediaPlayerDocsUrl)}\" target=\"_blank\" rel=\"noopener\">Setup Guide</a>`\n            : '';\n        container.innerHTML = `\n            <div class=\"empty-state\">\n                <p class=\"status-error\">No media players found. Configure a media player in Home Assistant.</p>\n                ${docsLink ? `<p style=\"margin-top: 12px;\">${docsLink}</p>` : ''}\n            </div>\n        `;\n        if (validationMsg) {\n            validationMsg.classList.add('hidden');\n        }\n        return;\n    }\n\n    if (availablePlayers.length === 0) {\n        // AC3: Players exist but all unavailable\n        const docsLink = mediaPlayerDocsUrl\n            ? `<a href=\"${utils.escapeHtml(mediaPlayerDocsUrl)}\" target=\"_blank\" rel=\"noopener\">Troubleshooting</a>`\n            : '';\n        container.innerHTML = `\n            <div class=\"empty-state\">\n                <p class=\"status-error\">All media players are unavailable. Check your devices are powered on.</p>\n                ${docsLink ? `<p style=\"margin-top: 12px;\">${docsLink}</p>` : ''}\n            </div>\n        `;\n        if (validationMsg) {\n            validationMsg.classList.add('hidden');\n        }\n        return;\n    }\n\n    // AC1: Render only available players with radio buttons\n    container.innerHTML = availablePlayers.map(player => {\n        // Show Music Assistant badge for MA players (enables Apple Music)\n        const massBadge = player.is_mass\n            ? '<span class=\"mass-badge\" title=\"Music Assistant - Apple Music enabled\">Music Assistant</span>'\n            : '';\n        return `\n        <div class=\"media-player-item list-item is-selectable${player.is_mass ? ' is-mass-player' : ''}\">\n            <label class=\"radio-label\">\n                <input type=\"radio\"\n                       class=\"media-player-radio\"\n                       name=\"media-player\"\n                       data-entity-id=\"${utils.escapeHtml(player.entity_id)}\"\n                       data-state=\"${utils.escapeHtml(player.state)}\"\n                       data-is-mass=\"${player.is_mass ? 'true' : 'false'}\">\n                <span class=\"player-name\">${utils.escapeHtml(player.friendly_name)}${massBadge}</span>\n            </label>\n            <span class=\"meta\">\n                <span class=\"state-dot state-${utils.escapeHtml(player.state)}\"></span>\n                ${utils.escapeHtml(player.state)}\n            </span>\n        </div>\n    `;\n    }).join('');\n\n    // Attach event listeners to radio buttons\n    container.querySelectorAll('.media-player-radio').forEach(radio => {\n        radio.addEventListener('change', function() {\n            handleMediaPlayerSelect(this);\n        });\n    });\n}\n\n/**\n * Handle media player radio button selection (AC4)\n * @param {HTMLInputElement} radio\n */\nfunction handleMediaPlayerSelect(radio) {\n    const entityId = radio.dataset.entityId;\n    const state = radio.dataset.state;\n\n    // Update module state\n    selectedMediaPlayer = { entityId, state };\n\n    // Update visual selection\n    document.querySelectorAll('.media-player-item').forEach(item => {\n        item.classList.remove('is-selected');\n    });\n    radio.closest('.media-player-item').classList.add('is-selected');\n\n    updateStartButtonState();\n}\n\n/**\n * Render playlists list with checkboxes for valid playlists\n * @param {Array} playlists\n * @param {string} playlistDir\n */\nfunction renderPlaylists(playlists, playlistDir) {\n    const container = document.getElementById('playlists-list');\n    // Remove data-i18n to prevent initPageTranslations from overwriting rendered content\n    container?.removeAttribute('data-i18n');\n\n    // Reset selection state\n    selectedPlaylists = [];\n    playlistData = playlists || [];\n\n    // Check if we have any valid playlists\n    const hasValidPlaylists = playlistData.some(p => p.is_valid);\n\n    if (!playlists || playlists.length === 0) {\n        // AC2: No playlists error with documentation link\n        const docsLink = playlistDocsUrl\n            ? `<a href=\"${utils.escapeHtml(playlistDocsUrl)}\" target=\"_blank\" rel=\"noopener\">How to create playlists</a>`\n            : '';\n        container.innerHTML = `\n            <div class=\"empty-state\">\n                <p class=\"status-error\">No playlists found. Add playlist JSON files to:</p>\n                <p style=\"font-size: 14px;\"><code>${utils.escapeHtml(playlistDir)}</code></p>\n                ${docsLink ? `<p style=\"margin-top: 12px;\">${docsLink}</p>` : ''}\n            </div>\n        `;\n        // Hide start button when no playlists (Story 9.10)\n        document.getElementById('start-game')?.classList.add('hidden');\n        return;\n    }\n\n    container.innerHTML = playlists.map(playlist => {\n        if (playlist.is_valid) {\n            // AC1: Valid playlists with checkbox\n            const songCount = playlist.song_count || 0;\n            // Provider count - Spotify only (Story 17.6)\n            const providerCount = playlist.spotify_count || songCount;\n\n            // Build coverage indicator\n            let coverageHtml = '';\n            if (providerCount < songCount) {\n                const coverageClass = providerCount === 0\n                    ? 'playlist-coverage playlist-coverage--none'\n                    : 'playlist-coverage playlist-coverage--warning';\n                coverageHtml = `<span class=\"${coverageClass}\">${providerCount}/${songCount}</span>`;\n            }\n\n            return `\n                <div class=\"playlist-item list-item is-selectable\">\n                    <label class=\"checkbox-label\">\n                        <input type=\"checkbox\"\n                               class=\"playlist-checkbox\"\n                               data-path=\"${utils.escapeHtml(playlist.path)}\"\n                               data-song-count=\"${utils.escapeHtml(String(songCount))}\">\n                        <span class=\"playlist-name\">${utils.escapeHtml(playlist.name)}</span>\n                    </label>\n                    <span class=\"meta\">${coverageHtml || utils.escapeHtml(String(songCount))} songs</span>\n                </div>\n            `;\n        } else {\n            // Invalid playlists: no checkbox, greyed out\n            const errorMsg = (playlist.errors && playlist.errors[0]) || 'Unknown error';\n            return `\n                <div class=\"list-item is-invalid\">\n                    <span class=\"name\">${utils.escapeHtml(playlist.name)}</span>\n                    <span class=\"meta\">Invalid: ${utils.escapeHtml(errorMsg)}</span>\n                </div>\n            `;\n        }\n    }).join('');\n\n    // Attach event listeners to checkboxes (instead of inline handlers)\n    container.querySelectorAll('.playlist-checkbox').forEach(checkbox => {\n        checkbox.addEventListener('change', function() {\n            handlePlaylistToggle(this);\n        });\n    });\n\n    // Show start button if we have valid playlists (Story 9.10)\n    if (hasValidPlaylists) {\n        document.getElementById('start-game')?.classList.remove('hidden');\n    } else {\n        document.getElementById('start-game')?.classList.add('hidden');\n    }\n\n    // Initialize summary as hidden\n    updateSelectionSummary();\n}\n\n/**\n * Handle playlist checkbox toggle\n * @param {HTMLInputElement} checkbox\n */\nfunction handlePlaylistToggle(checkbox) {\n    const path = checkbox.dataset.path;\n    const songCount = parseInt(checkbox.dataset.songCount, 10) || 0;\n    const item = checkbox.closest('.playlist-item');\n\n    if (checkbox.checked) {\n        // Prevent duplicate selections\n        if (!selectedPlaylists.some(p => p.path === path)) {\n            selectedPlaylists.push({ path, songCount });\n        }\n        item.classList.add('is-selected');\n    } else {\n        selectedPlaylists = selectedPlaylists.filter(p => p.path !== path);\n        item.classList.remove('is-selected');\n    }\n\n    updateSelectionSummary();\n    updateStartButtonState();\n}\n\n/**\n * Calculate total songs from selected playlists\n * @returns {number}\n */\nfunction calculateTotalSongs() {\n    return selectedPlaylists.reduce((sum, p) => sum + p.songCount, 0);\n}\n\n/**\n * Update the selection summary display\n */\nfunction updateSelectionSummary() {\n    const summary = document.getElementById('playlist-summary');\n    const selectedCount = document.getElementById('selected-count');\n    const totalSongs = document.getElementById('total-songs');\n\n    // Null check for DOM elements\n    if (!summary || !selectedCount || !totalSongs) {\n        return;\n    }\n\n    if (selectedPlaylists.length === 0) {\n        summary.classList.add('hidden');\n    } else {\n        summary.classList.remove('hidden');\n        selectedCount.textContent = selectedPlaylists.length;\n        totalSongs.textContent = calculateTotalSongs();\n    }\n}\n\n/**\n * Update start button enabled/disabled state and validation messages\n * Checks for both playlist AND media player selection\n */\nfunction updateStartButtonState() {\n    const btn = document.getElementById('start-game');\n    const playlistMsg = document.getElementById('playlist-validation-msg');\n    const mediaPlayerMsg = document.getElementById('media-player-validation-msg');\n\n    if (!btn) {\n        return;\n    }\n\n    const noPlaylist = selectedPlaylists.length === 0;\n    const noMediaPlayer = selectedMediaPlayer === null;\n\n    // Disable button if either selection is missing\n    btn.disabled = noPlaylist || noMediaPlayer;\n\n    // Show/hide playlist validation message\n    if (playlistMsg) {\n        playlistMsg.classList.toggle('hidden', !noPlaylist);\n    }\n\n    // Show/hide media player validation message\n    if (mediaPlayerMsg) {\n        mediaPlayerMsg.classList.toggle('hidden', !noMediaPlayer);\n    }\n}\n\n// escapeHtml moved to BeatifyUtils\n\n// ==========================================\n// View State Machine (Story 2.3)\n// ==========================================\n\n/**\n * Show setup view (initial state)\n */\nfunction showSetupView() {\n    currentView = 'setup';\n    currentGame = null;\n\n    // Stop lobby polling (Story 16.8)\n    stopLobbyPolling();\n    previousLobbyPlayers = [];\n\n    // Show setup sections\n    setupSections.forEach(id => {\n        const el = document.getElementById(id);\n        if (el) el.classList.remove('hidden');\n    });\n\n    // Show start button if there are valid playlists (Story 9.10)\n    const hasValidPlaylists = playlistData.some(p => p.is_valid);\n    if (hasValidPlaylists) {\n        document.getElementById('start-game')?.classList.remove('hidden');\n    }\n\n    // Hide other views\n    document.getElementById('lobby-section')?.classList.add('hidden');\n    document.getElementById('existing-game-section')?.classList.add('hidden');\n}\n\n/**\n * Show lobby view with QR code\n * @param {Object} gameData - Game data from API\n */\nfunction showLobbyView(gameData) {\n    currentView = 'lobby';\n    currentGame = gameData;\n\n    // Hide setup sections\n    setupSections.forEach(id => {\n        const el = document.getElementById(id);\n        if (el) el.classList.add('hidden');\n    });\n\n    // Hide start button and validation message (Story 9.10)\n    document.getElementById('start-game')?.classList.add('hidden');\n    document.getElementById('playlist-validation-msg')?.classList.add('hidden');\n\n    // Hide existing game view\n    document.getElementById('existing-game-section')?.classList.add('hidden');\n\n    // Show lobby\n    document.getElementById('lobby-section')?.classList.remove('hidden');\n\n    // Generate QR code (only if URL changed) - compact size, CSS scales for desktop\n    const qrContainer = document.getElementById('qr-code');\n    if (qrContainer && gameData.join_url) {\n        if (cachedQRUrl !== gameData.join_url) {\n            qrContainer.innerHTML = '';\n\n            if (typeof QRCode !== 'undefined') {\n                new QRCode(qrContainer, {\n                    text: gameData.join_url,\n                    width: 180,\n                    height: 180,\n                    colorDark: '#000000',\n                    colorLight: '#ffffff',\n                    correctLevel: QRCode.CorrectLevel.M\n                });\n            } else {\n                qrContainer.innerHTML = '<p class=\"status-error\">QR code library not loaded</p>';\n            }\n\n            cachedQRUrl = gameData.join_url;\n        }\n    }\n\n    // Display join URL\n    const urlEl = document.getElementById('join-url');\n    if (urlEl && gameData.join_url) {\n        urlEl.textContent = gameData.join_url;\n    }\n\n    // Update dashboard URL (compact inline link)\n    var dashboardUrl = window.location.origin + '/beatify/dashboard';\n    var dashboardLink = document.getElementById('admin-dashboard-url');\n    if (dashboardLink) {\n        dashboardLink.href = dashboardUrl;\n    }\n\n    // Render initial player list and start polling (Story 16.8)\n    renderLobbyPlayers(gameData.players || []);\n    startLobbyPolling();\n}\n\n/**\n * Show existing game view (for rejoin/end)\n * @param {Object} gameData - Game data from status API\n */\nfunction showExistingGameView(gameData) {\n    currentView = 'existing-game';\n    currentGame = gameData;\n\n    // Hide setup sections\n    setupSections.forEach(id => {\n        const el = document.getElementById(id);\n        if (el) el.classList.add('hidden');\n    });\n\n    // Hide start button and validation message (Story 9.10)\n    document.getElementById('start-game')?.classList.add('hidden');\n    document.getElementById('playlist-validation-msg')?.classList.add('hidden');\n\n    // Hide lobby\n    document.getElementById('lobby-section')?.classList.add('hidden');\n\n    // Show existing game section\n    document.getElementById('existing-game-section')?.classList.remove('hidden');\n\n    // Update game info\n    const idEl = document.getElementById('existing-game-id');\n    const phaseEl = document.getElementById('existing-game-phase');\n    const playersEl = document.getElementById('existing-game-players');\n\n    if (idEl) idEl.textContent = gameData.game_id || 'Unknown';\n    if (phaseEl) phaseEl.textContent = gameData.phase || 'Unknown';\n    if (playersEl) playersEl.textContent = gameData.player_count ?? 0;\n}\n\n// ==========================================\n// Game Control Functions (Story 2.3)\n// ==========================================\n\n/**\n * Start a new game\n */\nasync function startGame() {\n    const btn = document.getElementById('start-game');\n    if (!btn || btn.disabled) return;\n\n    btn.disabled = true;\n    const originalText = btn.textContent;\n    btn.textContent = 'Starting...';\n\n    try {\n        const response = await fetch('/beatify/api/start-game', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n                playlists: selectedPlaylists.map(p => p.path),\n                media_player: selectedMediaPlayer?.entityId,\n                language: selectedLanguage,\n                round_duration: selectedDuration,  // Story 13.1\n                difficulty: selectedDifficulty,  // Story 14.1\n                provider: selectedProvider,  // Story 17.2\n                artist_challenge_enabled: artistChallengeEnabled  // Story 20.7\n            })\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n            showError(data.message || 'Failed to start game');\n            return;\n        }\n\n        if (data.warnings && data.warnings.length > 0) {\n            console.warn('Game started with warnings:', data.warnings);\n        }\n\n        showLobbyView(data);\n\n    } catch (err) {\n        showError('Network error. Please try again.');\n        console.error('Start game error:', err);\n    } finally {\n        btn.disabled = false;\n        btn.textContent = originalText;\n        updateStartButtonState();\n    }\n}\n\n/**\n * Show end game confirmation modal (Story 9.10)\n */\nfunction showEndGameModal() {\n    const modal = document.getElementById('end-game-modal');\n    if (modal) {\n        modal.classList.remove('hidden');\n    }\n}\n\n/**\n * Close end game confirmation modal (Story 9.10)\n */\nfunction closeEndGameModal() {\n    const modal = document.getElementById('end-game-modal');\n    if (modal) {\n        modal.classList.add('hidden');\n    }\n}\n\n/**\n * End the current game - shows confirmation modal (Story 9.10)\n */\nfunction endGame() {\n    showEndGameModal();\n}\n\n/**\n * Actually end the game after confirmation\n */\nasync function confirmEndGame() {\n    closeEndGameModal();\n\n    try {\n        const response = await fetch('/beatify/api/end-game', { method: 'POST' });\n        if (response.ok) {\n            cachedQRUrl = null;  // Clear QR cache\n            showSetupView();\n        } else {\n            const data = await response.json();\n            showError(data.message || 'Failed to end game');\n        }\n    } catch (err) {\n        console.error('End game error:', err);\n        showError('Network error. Please try again.');\n    }\n}\n\n/**\n * Setup end game modal event listeners (Story 9.10)\n */\nfunction setupEndGameModal() {\n    const confirmBtn = document.getElementById('end-game-confirm-btn');\n    const cancelBtn = document.getElementById('end-game-cancel-btn');\n    const backdrop = document.querySelector('#end-game-modal .modal-backdrop');\n\n    confirmBtn?.addEventListener('click', confirmEndGame);\n    cancelBtn?.addEventListener('click', closeEndGameModal);\n    backdrop?.addEventListener('click', closeEndGameModal);\n\n    // ESC key handling added to global handler below\n}\n\n/**\n * Rejoin the current game - fetches fresh status first\n */\nasync function rejoinGame() {\n    if (!currentGame) return;\n\n    // Fetch fresh status to get latest player list\n    try {\n        var response = await fetch('/beatify/api/status');\n        if (response.ok) {\n            var status = await response.json();\n            if (status.active_game) {\n                currentGame = status.active_game;\n            }\n        }\n    } catch (err) {\n        console.error('Failed to refresh game status:', err);\n    }\n\n    // Show lobby view with current (possibly refreshed) game data\n    showLobbyView(currentGame);\n}\n\n/**\n * Print QR code\n */\nfunction printQRCode() {\n    window.print();\n}\n\n/**\n * Show error message to user\n * @param {string} message\n */\nfunction showError(message) {\n    // Simple alert for now - can be enhanced with toast notifications\n    alert(message);\n}\n\n// ==========================================\n// Admin Join Functions (Story 3.5)\n// ==========================================\n\n/**\n * Open admin join modal\n */\nfunction openAdminJoinModal() {\n    const modal = document.getElementById('admin-join-modal');\n    if (modal) {\n        modal.classList.remove('hidden');\n        document.getElementById('admin-name-input')?.focus();\n    }\n}\n\n/**\n * Close admin join modal\n */\nfunction closeAdminJoinModal() {\n    const modal = document.getElementById('admin-join-modal');\n    if (modal) {\n        modal.classList.add('hidden');\n    }\n    // Reset form\n    const nameInput = document.getElementById('admin-name-input');\n    const joinBtn = document.getElementById('admin-join-btn');\n    const errorMsg = document.getElementById('admin-name-error');\n    if (nameInput) nameInput.value = '';\n    if (joinBtn) {\n        joinBtn.disabled = true;\n        joinBtn.textContent = 'Join';\n    }\n    if (errorMsg) errorMsg.classList.add('hidden');\n}\n\n/**\n * Setup admin join modal and button handlers\n */\nfunction setupAdminJoin() {\n    const participateBtn = document.getElementById('participate-btn');\n    const cancelBtn = document.getElementById('admin-cancel-btn');\n    const joinBtn = document.getElementById('admin-join-btn');\n    const nameInput = document.getElementById('admin-name-input');\n    const backdrop = document.querySelector('#admin-join-modal .modal-backdrop');\n\n    participateBtn?.addEventListener('click', openAdminJoinModal);\n    cancelBtn?.addEventListener('click', closeAdminJoinModal);\n    backdrop?.addEventListener('click', closeAdminJoinModal);\n\n    nameInput?.addEventListener('input', function() {\n        const name = this.value.trim();\n        joinBtn.disabled = !name || name.length > 20;\n    });\n\n    nameInput?.addEventListener('keypress', function(e) {\n        if (e.key === 'Enter' && !joinBtn.disabled) {\n            handleAdminJoin();\n        }\n    });\n\n    joinBtn?.addEventListener('click', handleAdminJoin);\n\n    // Close modals on Escape (Story 9.10: also handles end-game-modal)\n    document.addEventListener('keydown', function(e) {\n        if (e.key === 'Escape') {\n            const adminModal = document.getElementById('admin-join-modal');\n            const endGameModal = document.getElementById('end-game-modal');\n\n            if (adminModal && !adminModal.classList.contains('hidden')) {\n                closeAdminJoinModal();\n            }\n            if (endGameModal && !endGameModal.classList.contains('hidden')) {\n                closeEndGameModal();\n            }\n        }\n    });\n}\n\n/**\n * Handle admin join button click\n */\nfunction handleAdminJoin() {\n    const nameInput = document.getElementById('admin-name-input');\n    const joinBtn = document.getElementById('admin-join-btn');\n    const name = nameInput?.value.trim();\n\n    if (!name) return;\n\n    joinBtn.disabled = true;\n    joinBtn.textContent = 'Joining...';\n\n    try {\n        // Store admin name for player page\n        sessionStorage.setItem('beatify_admin_name', name);\n        sessionStorage.setItem('beatify_is_admin', 'true');\n\n        // Redirect to player page with game ID\n        const gameId = currentGame?.game_id;\n        if (gameId) {\n            window.location.href = '/beatify/play?game=' + encodeURIComponent(gameId);\n        } else {\n            showError('No active game found');\n            joinBtn.disabled = false;\n            joinBtn.textContent = 'Join';\n        }\n    } catch (err) {\n        console.error('Admin join failed:', err);\n        joinBtn.disabled = false;\n        joinBtn.textContent = 'Join';\n    }\n}\n\n/**\n * Setup language selector buttons (Story 12.4)\n */\nfunction setupLanguageSelector() {\n    var langButtons = document.querySelectorAll('.lang-btn');\n\n    langButtons.forEach(function(btn) {\n        btn.addEventListener('click', function() {\n            var lang = btn.getAttribute('data-lang');\n            if (lang && lang !== selectedLanguage) {\n                setLanguage(lang);\n            }\n        });\n    });\n}\n\n/**\n * Update language button states (Story 12.4)\n * @param {string} lang - Language code ('en', 'de', or 'es')\n */\nfunction updateLanguageButtons(lang) {\n    var langButtons = document.querySelectorAll('.lang-btn');\n    langButtons.forEach(function(btn) {\n        var btnLang = btn.getAttribute('data-lang');\n        if (btnLang === lang) {\n            btn.classList.add('lang-btn--active');\n        } else {\n            btn.classList.remove('lang-btn--active');\n        }\n    });\n}\n\n/**\n * Set language and update UI (Story 12.4, 16.3)\n * @param {string} lang - Language code ('en', 'de', or 'es')\n */\nasync function setLanguage(lang) {\n    if (lang !== 'en' && lang !== 'de' && lang !== 'es') {\n        lang = 'en';\n    }\n\n    selectedLanguage = lang;\n    updateLanguageButtons(lang);\n\n    // Update i18n and re-render page\n    await BeatifyI18n.setLanguage(lang);\n    BeatifyI18n.initPageTranslations();\n}\n\n// ==========================================\n// Timer Selector Functions (Story 13.1)\n// ==========================================\n\n/**\n * Setup timer selector buttons\n */\nfunction setupTimerSelector() {\n    var timerButtons = document.querySelectorAll('.timer-btn');\n\n    timerButtons.forEach(function(btn) {\n        btn.addEventListener('click', function() {\n            var duration = parseInt(btn.getAttribute('data-duration'), 10);\n            if (duration && duration !== selectedDuration) {\n                setTimerDuration(duration);\n            }\n        });\n    });\n}\n\n/**\n * Update timer button states\n * @param {number} duration - Duration in seconds (15, 30, or 45)\n */\nfunction updateTimerButtons(duration) {\n    var timerButtons = document.querySelectorAll('.timer-btn');\n    timerButtons.forEach(function(btn) {\n        var btnDuration = parseInt(btn.getAttribute('data-duration'), 10);\n        if (btnDuration === duration) {\n            btn.classList.add('timer-btn--active');\n        } else {\n            btn.classList.remove('timer-btn--active');\n        }\n    });\n}\n\n/**\n * Set timer duration\n * @param {number} duration - Duration in seconds (10-60 range)\n */\nfunction setTimerDuration(duration) {\n    // Validate duration is within valid range (matches backend: 10-60)\n    if (typeof duration !== 'number' || duration < 10 || duration > 60) {\n        duration = 30;\n    }\n\n    selectedDuration = duration;\n    updateTimerButtons(duration);\n}\n\n// ==========================================\n// Difficulty Selector Functions (Story 14.1)\n// ==========================================\n\n// Mapping of difficulty levels to their description i18n keys\nconst difficultyDescriptions = {\n    easy: 'admin.difficultyEasyDesc',\n    normal: 'admin.difficultyNormalDesc',\n    hard: 'admin.difficultyHardDesc'\n};\n\n/**\n * Setup difficulty selector buttons\n */\nfunction setupDifficultySelector() {\n    var difficultyButtons = document.querySelectorAll('.difficulty-btn');\n\n    difficultyButtons.forEach(function(btn) {\n        btn.addEventListener('click', function() {\n            var difficulty = btn.getAttribute('data-difficulty');\n            if (difficulty && difficulty !== selectedDifficulty) {\n                setDifficulty(difficulty);\n            }\n        });\n    });\n}\n\n/**\n * Update difficulty button states\n * @param {string} difficulty - Difficulty level ('easy', 'normal', or 'hard')\n */\nfunction updateDifficultyButtons(difficulty) {\n    var difficultyButtons = document.querySelectorAll('.difficulty-btn');\n    difficultyButtons.forEach(function(btn) {\n        var btnDifficulty = btn.getAttribute('data-difficulty');\n        if (btnDifficulty === difficulty) {\n            btn.classList.add('difficulty-btn--active');\n        } else {\n            btn.classList.remove('difficulty-btn--active');\n        }\n    });\n}\n\n/**\n * Set difficulty level and update UI\n * @param {string} difficulty - Difficulty level ('easy', 'normal', or 'hard')\n */\nfunction setDifficulty(difficulty) {\n    // Validate difficulty\n    var validDifficulties = ['easy', 'normal', 'hard'];\n    if (validDifficulties.indexOf(difficulty) === -1) {\n        difficulty = 'normal';\n    }\n\n    selectedDifficulty = difficulty;\n    updateDifficultyButtons(difficulty);\n\n    // Update description text\n    var descriptionEl = document.getElementById('difficulty-description');\n    if (descriptionEl) {\n        var descKey = difficultyDescriptions[difficulty];\n        descriptionEl.setAttribute('data-i18n', descKey);\n        // Use i18n translation if available\n        if (typeof BeatifyI18n !== 'undefined' && BeatifyI18n.t) {\n            descriptionEl.textContent = BeatifyI18n.t(descKey);\n        }\n    }\n}\n\n// ==========================================\n// Artist Challenge Toggle Functions (Story 20.7)\n// ==========================================\n\n/**\n * Setup artist challenge toggle\n */\nfunction setupArtistChallengeToggle() {\n    var toggle = document.getElementById('artist-challenge-toggle');\n    if (!toggle) return;\n\n    // Load saved preference\n    var saved = localStorage.getItem('beatify_artist_challenge');\n    if (saved !== null) {\n        artistChallengeEnabled = saved === 'true';\n        toggle.checked = artistChallengeEnabled;\n    }\n\n    toggle.addEventListener('change', function() {\n        artistChallengeEnabled = toggle.checked;\n        // Save preference\n        localStorage.setItem('beatify_artist_challenge', artistChallengeEnabled.toString());\n    });\n}\n\n// ==========================================\n// Provider Selector Functions (Story 17.2)\n// ==========================================\n\n/**\n * Setup provider selector buttons\n */\nfunction setupProviderSelector() {\n    var providerButtons = document.querySelectorAll('.provider-btn');\n\n    providerButtons.forEach(function(btn) {\n        btn.addEventListener('click', function() {\n            // Don't allow clicking disabled buttons\n            if (btn.classList.contains('provider-btn--disabled')) {\n                return;\n            }\n            var provider = btn.getAttribute('data-provider');\n            if (provider && provider !== selectedProvider) {\n                setProvider(provider);\n            }\n        });\n    });\n}\n\n/**\n * Update provider button states\n * @param {string} provider - Provider identifier ('spotify' or 'apple_music')\n */\nfunction updateProviderButtons(provider) {\n    var providerButtons = document.querySelectorAll('.provider-btn');\n    providerButtons.forEach(function(btn) {\n        var btnProvider = btn.getAttribute('data-provider');\n        if (btnProvider === provider) {\n            btn.classList.add('provider-btn--active');\n        } else {\n            btn.classList.remove('provider-btn--active');\n        }\n    });\n}\n\n/**\n * Set music provider and update UI\n * @param {string} provider - Provider identifier (only 'spotify' supported, Story 17.6)\n */\nfunction setProvider(provider) {\n    // Only Spotify is supported (Story 17.6: Apple Music removed)\n    selectedProvider = 'spotify';\n    updateProviderButtons('spotify');\n\n    // Re-render playlists to show coverage for selected provider\n    if (playlistData.length > 0) {\n        renderPlaylists(playlistData, '');\n    }\n}\n\n// ==========================================\n// Lobby Player List Functions (Story 16.8)\n// ==========================================\n\n// t() moved to BeatifyUtils\n\n/**\n * Render player list in admin lobby (analytics grid layout)\n * @param {Array} players - Array of player objects from game state\n */\nfunction renderLobbyPlayers(players) {\n    var listEl = document.getElementById('lobby-players');\n    var countEl = document.getElementById('lobby-player-count');\n    var emptyEl = document.getElementById('lobby-players-empty');\n    var statusEl = document.getElementById('lobby-status-value');\n    if (!listEl) return;\n\n    players = players || [];\n\n    // Update player count (stat card value - just the number)\n    if (countEl) {\n        countEl.textContent = players.length;\n    }\n\n    // Update status based on player count\n    if (statusEl) {\n        if (players.length === 0) {\n            statusEl.textContent = utils.t('lobby.statusWaiting', 'Waiting');\n        } else if (players.length >= 2) {\n            statusEl.textContent = utils.t('lobby.statusReady', 'Ready');\n        } else {\n            statusEl.textContent = utils.t('lobby.statusNeedMore', 'Need 1+');\n        }\n    }\n\n    // Handle empty state visibility\n    if (players.length === 0) {\n        listEl.innerHTML = '';\n        if (emptyEl) emptyEl.classList.remove('hidden');\n        previousLobbyPlayers = [];\n        return;\n    }\n\n    // Hide empty state when we have players\n    if (emptyEl) emptyEl.classList.add('hidden');\n\n    // Sort: connected first, disconnected last\n    var sortedPlayers = players.slice().sort(function(a, b) {\n        if (a.connected !== b.connected) {\n            return a.connected ? -1 : 1;\n        }\n        return 0;\n    });\n\n    // Find new players by comparing with previous list\n    var previousNames = previousLobbyPlayers.map(function(p) { return p.name; });\n    var newNames = sortedPlayers\n        .filter(function(p) { return previousNames.indexOf(p.name) === -1; })\n        .map(function(p) { return p.name; });\n\n    // Render player cards (grid layout)\n    listEl.innerHTML = sortedPlayers.map(function(player) {\n        var isNew = newNames.indexOf(player.name) !== -1;\n        var isDisconnected = player.connected === false;\n        var isAdmin = player.is_admin === true;\n        var classes = [\n            'player-card',\n            isNew ? 'is-new' : '',\n            isDisconnected ? 'player-card--disconnected' : ''\n        ].filter(Boolean).join(' ');\n\n        // Crown badge for admin\n        var adminBadge = isAdmin ? '<span class=\"admin-badge\">\uD83D\uDC51</span>' : '';\n        // Badge for disconnected players\n        var awayBadge = isDisconnected ? '<span class=\"away-badge\">' + utils.t('lobby.away', 'away') + '</span>' : '';\n\n        return '<div class=\"' + classes + '\" data-player=\"' + utils.escapeHtml(player.name) + '\">' +\n            '<span class=\"player-name\">' +\n                utils.escapeHtml(player.name) +\n                adminBadge +\n            '</span>' +\n            awayBadge +\n        '</div>';\n    }).join('');\n\n    // Remove .is-new class after animation\n    setTimeout(function() {\n        var newCards = listEl.querySelectorAll('.is-new');\n        for (var i = 0; i < newCards.length; i++) {\n            newCards[i].classList.remove('is-new');\n        }\n    }, 2000);\n\n    previousLobbyPlayers = players.slice();\n}\n\n/**\n * Start polling for lobby state updates\n */\nfunction startLobbyPolling() {\n    // Clear any existing interval\n    stopLobbyPolling();\n\n    // Poll every 3 seconds (balanced between responsiveness and server load)\n    lobbyPollingInterval = setInterval(async function() {\n        if (currentView !== 'lobby') {\n            stopLobbyPolling();\n            return;\n        }\n\n        try {\n            var response = await fetch('/beatify/api/status');\n            if (!response.ok) return;\n\n            var status = await response.json();\n            if (status.active_game && status.active_game.players) {\n                renderLobbyPlayers(status.active_game.players);\n            }\n        } catch (err) {\n            console.error('Lobby polling error:', err);\n        }\n    }, 3000);\n}\n\n/**\n * Stop polling for lobby state updates\n */\nfunction stopLobbyPolling() {\n    if (lobbyPollingInterval) {\n        clearInterval(lobbyPollingInterval);\n        lobbyPollingInterval = null;\n    }\n}\n\n// ============================================\n// Service Worker Registration (Story 18.5)\n// ============================================\n\n/**\n * Register service worker for asset caching\n */\nif ('serviceWorker' in navigator) {\n    window.addEventListener('load', function() {\n        navigator.serviceWorker.register('/beatify/static/sw.js', {\n            scope: '/beatify/'\n        }).then(function(registration) {\n            console.log('[Admin] SW registered:', registration.scope);\n        }).catch(function(error) {\n            console.warn('[Admin] SW registration failed:', error);\n        });\n    });\n}\n"],
  "mappings": "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",
  "names": ["require_admin", "__commonJSMin", "exports", "selectedPlaylists", "playlistData", "playlistDocsUrl", "selectedMediaPlayer", "mediaPlayerDocsUrl", "currentView", "currentGame", "cachedQRUrl", "selectedLanguage", "selectedDuration", "selectedDifficulty", "selectedProvider", "hasMusicAssistant", "artistChallengeEnabled", "previousLobbyPlayers", "lobbyPollingInterval", "setupSections", "utils", "__async", "_a", "_b", "_c", "_d", "_e", "updateLanguageButtons", "startGame", "printQRCode", "rejoinGame", "endGame", "setupAdminJoin", "setupEndGameModal", "setupLanguageSelector", "setupTimerSelector", "setupDifficultySelector", "setupProviderSelector", "setupArtistChallengeToggle", "loadStatus", "response", "status", "versionEl", "renderMediaPlayers", "renderPlaylists", "updateStartButtonState", "showExistingGameView", "showSetupView", "error", "container", "players", "totalPlayers", "availablePlayers", "p", "validationMsg", "docsLink", "player", "massBadge", "radio", "handleMediaPlayerSelect", "entityId", "state", "item", "playlists", "playlistDir", "hasValidPlaylists", "playlist", "songCount", "providerCount", "coverageHtml", "errorMsg", "checkbox", "handlePlaylistToggle", "updateSelectionSummary", "path", "calculateTotalSongs", "sum", "summary", "selectedCount", "totalSongs", "btn", "playlistMsg", "mediaPlayerMsg", "noPlaylist", "noMediaPlayer", "stopLobbyPolling", "id", "el", "showLobbyView", "gameData", "qrContainer", "urlEl", "dashboardUrl", "dashboardLink", "renderLobbyPlayers", "startLobbyPolling", "idEl", "phaseEl", "playersEl", "originalText", "data", "showError", "err", "showEndGameModal", "modal", "closeEndGameModal", "confirmEndGame", "confirmBtn", "cancelBtn", "backdrop", "message", "openAdminJoinModal", "closeAdminJoinModal", "nameInput", "joinBtn", "participateBtn", "name", "e", "handleAdminJoin", "adminModal", "endGameModal", "gameId", "langButtons", "lang", "setLanguage", "btnLang", "timerButtons", "duration", "setTimerDuration", "updateTimerButtons", "btnDuration", "difficultyDescriptions", "difficultyButtons", "difficulty", "setDifficulty", "updateDifficultyButtons", "btnDifficulty", "validDifficulties", "descriptionEl", "descKey", "toggle", "saved", "providerButtons", "provider", "setProvider", "updateProviderButtons", "btnProvider", "listEl", "countEl", "emptyEl", "statusEl", "sortedPlayers", "a", "b", "previousNames", "newNames", "isNew", "isDisconnected", "isAdmin", "classes", "adminBadge", "awayBadge", "newCards", "i", "registration"]
}

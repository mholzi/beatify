<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Beatify Admin</title>
    <!-- Preconnect for faster font loading (Story 9.8) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/beatify/static/css/styles.css">
</head>
<body class="theme-dark">
    <header>
        <h1 class="wordmark"><span class="wordmark-beat">Beat</span><span class="wordmark-gradient">ify</span></h1>
    </header>

    <main>
        <section id="media-players" class="card-section">
            <h2>Media Players</h2>
            <div id="media-players-list">Loading...</div>
            <p id="media-player-validation-msg" class="status-error hidden" style="margin-top: 12px;">Select a media player</p>
        </section>

        <section id="playlists" class="card-section">
            <h2>Playlists</h2>
            <div id="playlists-list">Loading...</div>
            <div id="playlist-summary" class="selection-summary hidden">
                Selected: <span id="selected-count">0</span> playlists,
                <span id="total-songs">0</span> songs
            </div>
        </section>

        <!-- Start Game button (Story 9.10: moved from Game Controls card) -->
        <p id="playlist-validation-msg" class="status-error hidden" style="margin: var(--space-md) 0;">Select at least one playlist</p>
        <button id="start-game" class="btn btn-primary btn-large btn-full-width hidden" disabled>Start Game</button>

        <!-- Lobby view (Story 2.3) -->
        <section id="lobby-section" class="card-section hidden">
            <h2>Game Lobby</h2>
            <div class="qr-print-area">
                <div class="qr-container">
                    <div id="qr-code" aria-label="QR code to join Beatify game"></div>
                </div>
                <p class="qr-instruction">Scan to Play Beatify!</p>
                <p id="join-url" class="join-url"></p>
            </div>
            <div class="lobby-controls no-print">
                <button id="print-qr" class="btn btn-secondary">Print QR Code</button>
            </div>
            <div id="lobby-players" class="player-list">
                <p class="empty-state">Waiting for players to join...</p>
            </div>
            <div class="admin-lobby-actions no-print">
                <button id="participate-btn" class="btn btn-primary btn-large">
                    <span class="btn-icon">ðŸŽ®</span>
                    Join as Player
                </button>
            </div>
            <div class="game-controls-bar no-print">
                <button id="end-game-lobby" class="btn btn-secondary">End Game</button>
            </div>
        </section>

        <!-- Existing game view (Story 2.3) -->
        <section id="existing-game-section" class="card-section hidden">
            <h2>Game In Progress</h2>
            <div class="game-info">
                <p><strong>Game ID:</strong> <span id="existing-game-id"></span></p>
                <p><strong>Phase:</strong> <span id="existing-game-phase"></span></p>
                <p><strong>Players:</strong> <span id="existing-game-players"></span></p>
            </div>
            <div class="game-controls-bar">
                <button id="rejoin-game" class="btn btn-primary">Rejoin Game</button>
                <button id="end-game" class="btn btn-secondary">End Current Game</button>
            </div>
        </section>
    </main>

    <!-- Admin join modal -->
    <div id="admin-join-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2>Join the Game</h2>
            <p>Enter your display name to join as a player with admin controls.</p>
            <div class="form-group">
                <input type="text" id="admin-name-input" class="name-input"
                       placeholder="Your name" maxlength="20"
                       autocomplete="off" autocapitalize="words">
                <p id="admin-name-error" class="validation-msg hidden"></p>
            </div>
            <div class="modal-actions">
                <button id="admin-join-btn" class="btn btn-primary" disabled>Join</button>
                <button id="admin-cancel-btn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- End Game confirmation modal (Story 9.10) -->
    <div id="end-game-modal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="end-game-modal-title">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2 id="end-game-modal-title">End Game?</h2>
            <p>All players will be disconnected.</p>
            <div class="modal-actions">
                <button id="end-game-confirm-btn" class="btn btn-primary">End Game</button>
                <button id="end-game-cancel-btn" class="btn btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <footer>
        <p>Beatify v0.9.0</p>
    </footer>

    <script src="/beatify/static/js/vendor/qrcode.min.js"></script>
    <script src="/beatify/static/js/admin.js"></script>
</body>
</html>
